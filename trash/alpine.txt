apk update && apk add curl iptables iproute2 openssh bash

Bunlar şu işe yarar:

    curl → K3s kurulum komutları için gereklidir.

    iptables → Kubernetes’in network yönlendirmeleri için gereklidir.

    iproute2 → Ağ yapılandırmaları için kullanılır.

    openssh → SSH bağlantıları için.

    bash → Alpine'ın varsayılan kabuğu ash yerine daha uyumlu bir ortam sağlar.


K3s ve Kubernetes, container çalıştırabilmek için cgroups’a 
ihtiyaç duyar. Alpine'de bu desteği etkinleştirmek için:
   
    echo "overlay" >> /etc/modules
    echo "br_netfilter" >> /etc/modules
    echo "cgroup" >> /etc/modules
    echo "cgroup2" >> /etc/modules
    echo "cgroup_memory=1" >> /etc/cmdline
    echo "cgroup_enable=memory" >> /etc/cmdline



modprobe overlay
modprobe br_netfilter
modprobe cgroup
modprobe cgroup2



cat <<EOF | tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
EOF
sysctl --system
